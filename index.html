<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Control de Acceso por Reconocimiento Facial</title>

  <link rel="stylesheet" href="styles.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Lexend+Deca:wght@100..900&display=swap" rel="stylesheet">

  <script defer src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@2.0.0/dist/tf.min.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/face-api.js@0.22.2/dist/face-api.min.js"></script>

  <script type="module" src="js/app.js"></script>
</head>

<body>
  <div class="main-wrapper">
    <div class="container">
      <div class="content">

        <!-- HOME -->
        <section id="home-screen" class="screen active">
          <h1 class="titulo">Bienvenido</h1>
          <p class="intro">Sistema de reconocimiento facial para registro y autenticación de usuarios</p>

          <!-- LOGO: centered, controlled size -->
          <div class="logo">
            <img src="icono.png" alt="Logo de la empresa">
          </div>

          <p class="subtitle">Seleccione una opción para continuar:</p>

          <div class="action-buttons">
            <button id="ingreso-btn" class="btn btn-success"><span>Registrar Ingreso</span></button>
            <button id="egreso-btn" class="btn btn-secondary"><span>Registrar Egreso</span></button>
          </div>
        </section>

        <!-- LOGIN (ingreso / egreso) -->
        <section id="login-screen" class="screen">
          <h2 id="login-title">Registro de Ingreso/Egreso</h2>
          <p id="login-description">Por favor, colóquese frente a la cámara.</p>

          <div class="video-container">
            <video id="login-video" autoplay muted playsinline></video>
            <canvas id="login-overlay"></canvas>
          </div>

          <div id="countdown" class="countdown">5</div>
          <div id="login-status" class="status info">Buscando coincidencias...</div>

          <div class="action-buttons">
            <button id="back-to-home-from-denied" class="btn btn-secondary">Volver al Inicio</button>
          </div>

          <div id="manual-login" class="manual-login" style="display:none;">
            <h3>Inicio de Sesión Manual</h3>
            <div class="form-group">
              <label for="manual-operator-code">Código:</label>
              <input type="text" id="manual-operator-code">
            </div>
            <div class="form-group">
              <label for="manual-operator-dni">DNI:</label>
              <input type="text" id="manual-operator-dni">
            </div>
            <button id="manual-login-btn" class="btn">Iniciar Sesión</button>
            <button id="retry-facial-login-btn" class="btn btn-secondary">Reintentar</button>
          </div>
        </section>

        <!-- ACCESS GRANTED -->
        <section id="access-granted-screen" class="screen">
          <div class="status success">
            <h2>¡Registro Exitoso!</h2>
            <p id="welcome-message"></p>
          </div>
          <div class="action-buttons-small">
            <button id="back-after-access" class="btn">Volver al Inicio</button>
            <button id="supervisor-menu-btn" class="btn btn-info" style="display:none;">Menú Supervisor</button>
          </div>
        </section>

        <!-- ACCESS DENIED -->
        <section id="access-denied-screen" class="screen">
          <div class="status error">
            <h2>Acceso Denegado</h2>
            <p id="denial-reason"></p>
          </div>
          <div class="action-buttons-small">
            <button id="try-again-btn" class="btn">Intentar Nuevamente</button>
            <button id="back-to-home-from-denied-2" class="btn btn-secondary">Volver al Inicio</button>
          </div>
          <button id="supervisor-menu-btn-denied" class="btn btn-info" style="display:none;">Menú Supervisor</button>
        </section>

      </div>
    </div>
  </div>
</body>

</html>